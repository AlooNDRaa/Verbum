"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addInterceptorToActionMetadata = void 0;
const SocketControllerMetaKey_1 = require("../types/SocketControllerMetaKey");
const get_metadata_1 = require("./get-metadata");
const addInterceptorToActionMetadata = (target, methodName, interceptor) => {
    var _a, _b, _c;
    const existingMetadata = (0, get_metadata_1.getMetadata)(target);
    Reflect.defineMetadata(SocketControllerMetaKey_1.SOCKET_CONTROLLER_META_KEY, {
        ...existingMetadata,
        actions: {
            ...existingMetadata === null || existingMetadata === void 0 ? void 0 : existingMetadata.actions,
            [methodName]: {
                ...(_a = existingMetadata === null || existingMetadata === void 0 ? void 0 : existingMetadata.actions) === null || _a === void 0 ? void 0 : _a[methodName],
                interceptors: [interceptor, ...(((_c = (_b = existingMetadata === null || existingMetadata === void 0 ? void 0 : existingMetadata.actions) === null || _b === void 0 ? void 0 : _b[methodName]) === null || _c === void 0 ? void 0 : _c.interceptors) || [])],
            },
        },
    }, target);
};
exports.addInterceptorToActionMetadata = addInterceptorToActionMetadata;
//# sourceMappingURL=add-interceptor-to-action-metadata.js.map